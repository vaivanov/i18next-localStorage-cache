!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.i18nextLocalStorageCache=t()}(this,function(){"use strict";function e(e){return l.call(f.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}function t(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},u=n&&!r;clearTimeout(r),r=setTimeout(a,t),u&&e.apply(i,o)}}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(m),a=r.decode||v,u=0;u<i.length;u++){var s=i[u],l=s.indexOf("=");if(!(l<0)){var f=s.substr(0,l).trim(),c=s.substr(++l,s.length).trim();'"'==c[0]&&(c=c.slice(1,-1)),void 0==n[f]&&(n[f]=o(c,a))}}return n}function i(e,t,n){var r=n||{},i=r.encode||h;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!y.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!y.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(r.domain){if(!y.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!y.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function o(e,t){try{return t(e)}catch(t){return e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(){return{enabled:!1,prefix:"i18next_res_",expirationTime:6048e5,versions:{}}}var s=[],l=s.forEach,f=s.slice,c=n(function(e,t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage";try{var t=window[e];return t.setItem(r,"1"),t.removeItem(r),!0}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r="__test"}),p=r,d=i,v=decodeURIComponent,h=encodeURIComponent,m=/; */,y=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,g={parse:p,serialize:d},w=n(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=a.prototype,t=e.setItem,n=e.getItem,r=e.removeItem;try{t("__test","1");var i=n("__test");return r("__test"),"1"==i}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hasCookies=r;var o=function(e){return e&&e.__esModule?e:{default:e}}(g),a=function(){function e(){n(this,e)}return i(e,[{key:"getItem",value:function(e){var t=o.default.parse(document.cookie);return t&&t.hasOwnProperty("lS_"+e)?t["lS_"+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=o.default.serialize("lS_"+e,t,{path:"/"}),t}},{key:"removeItem",value:function(e){return document.cookie=o.default.serialize("lS_"+e,"",{path:"/",maxAge:-1}),null}},{key:"clear",value:function(){var e=o.default.parse(document.cookie);for(var t in e)0===t.indexOf("lS_")&&this.removeItem(t.substr("lS_".length));return null}}]),e}();t.default=a}),S=n(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=i}),_=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(c),i=n(w),o=n(S),a=null;a=(0,r.default)("localStorage")?window.localStorage:(0,r.default)("sessionStorage")?window.sessionStorage:(0,w.hasCookies)()?new i.default:new o.default,t.default=a}),b=function(e){return e&&e.__esModule?e.default:e}(_),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,n),this.init(e,r),this.type="cache",this.debouncedStore=t(this.store,1e4)}return x(n,[{key:"init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=e(n,this.options||{},u())}},{key:"load",value:function(e,t){var n=this,r={},i=(new Date).getTime();try{if(!b||!e.length)return t(null,null)}catch(e){return t(null,null)}var o=e.length;e.forEach(function(e){var a=b.getItem(n.options.prefix+e);a&&(a=JSON.parse(a),a.i18nStamp&&a.i18nStamp+n.options.expirationTime>i&&n.options.versions[e]===a.i18nVersion&&(delete a.i18nVersion,r[e]=a)),0===(o-=1)&&t(null,r)})}},{key:"store",value:function(e){var t=e;if(b)for(var n in t)t[n].i18nStamp=(new Date).getTime(),this.options.versions[n]&&(t[n].i18nVersion=this.options.versions[n]),b.setItem(this.options.prefix+n,JSON.stringify(t[n]))}},{key:"save",value:function(e){this.debouncedStore(e)}}]),n}();return k.type="cache",k});
