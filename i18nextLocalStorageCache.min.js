!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.i18nextLocalStorageCache=t()}(this,function(){"use strict";function e(e){return l.call(f.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e}function t(e,t,n){var r;return function(){var o=this,i=arguments,a=function(){r=null,n||e.apply(o,i)},u=n&&!r;clearTimeout(r),r=setTimeout(a,t),u&&e.apply(o,i)}}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},r=t||{},o=e.split(h),a=r.decode||p,u=0;u<o.length;u++){var s=o[u],l=s.indexOf("=");if(!(l<0)){var f=s.substr(0,l).trim(),c=s.substr(++l,s.length).trim();'"'==c[0]&&(c=c.slice(1,-1)),void 0==n[f]&&(n[f]=i(c,a))}}return n}function o(e,t,n){var r=n||{},o=r.encode||v;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!m.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!m.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(r.domain){if(!m.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!m.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function i(e,t){try{return t(e)}catch(t){return e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(){return{enabled:!1,prefix:"i18next_res_",expirationTime:6048e5,versions:{}}}var s=[],l=s.forEach,f=s.slice,c=r,d=o,p=decodeURIComponent,v=encodeURIComponent,h=/; */,m=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,g={parse:c,serialize:d},y=n(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=new u;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hasCookies=r;var i=function(e){return e&&e.__esModule?e:{default:e}}(g),a="lS_",u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.cookieOptions=Object.assign({path:"/"},t),a=t.prefix||a}return o(e,[{key:"getItem",value:function(e){var t=i.default.parse(document.cookie);return t&&t.hasOwnProperty(a+e)?t[a+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=i.default.serialize(a+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=Object.assign({},this.cookieOptions,{maxAge:-1});return document.cookie=i.default.serialize(a+e,"",t),null}},{key:"clear",value:function(){var e=i.default.parse(document.cookie);for(var t in e)0===t.indexOf(a)&&this.removeItem(t.substr(a.length));return null}}]),e}();t.default=u}),w=n(function(e,t){function n(e){try{var t=window[e];return t.setItem(o,"1"),t.removeItem(o),!0}catch(e){return!1}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,y.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o="__test"}),S=n(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=o}),b=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=t.CookieStorage=t.isSupported=t.storage=void 0;var r=n(w),o=n(y),i=n(S),a=null;(0,r.default)("localStorage")?t.storage=a=window.localStorage:(0,r.default)("sessionStorage")?t.storage=a=window.sessionStorage:(0,r.default)("cookieStorage")?t.storage=a=new o.default:t.storage=a=new i.default,t.default=a,t.storage=a,t.isSupported=r.default,t.CookieStorage=o.default,t.MemoryStorage=i.default}),k=function(e){return e&&e.__esModule?e.default:e}(b),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,n),this.init(e,r),this.type="cache",this.debouncedStore=t(this.store,1e4)}return _(n,[{key:"init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=e(n,this.options||{},u())}},{key:"load",value:function(e,t){var n=this,r={},o=(new Date).getTime();try{if(!k||!e.length)return t(null,null)}catch(e){return t(null,null)}var i=e.length;e.forEach(function(e){var a=k.getItem(n.options.prefix+e);a&&(a=JSON.parse(a),a.i18nStamp&&a.i18nStamp+n.options.expirationTime>o&&n.options.versions[e]===a.i18nVersion&&(delete a.i18nVersion,r[e]=a)),0===(i-=1)&&t(null,r)})}},{key:"store",value:function(e){var t=e;if(k)for(var n in t)t[n].i18nStamp=(new Date).getTime(),this.options.versions[n]&&(t[n].i18nVersion=this.options.versions[n]),k.setItem(this.options.prefix+n,JSON.stringify(t[n]))}},{key:"save",value:function(e){this.debouncedStore(e)}}]),n}();return x.type="cache",x});
